---
import Layout from '../../layouts/Layout.astro';
import LanguageSwitcher from '../../components/LanguageSwitcherFast.astro';
import VideoBackground from '../../components/VideoBackground.astro';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const videos = [
  { id: '1049547489', title: 'Baum Studios Arhitektonski Projekt 1' },
  { id: '1049933393?h=0f18a56b36', title: 'Baum Studios Arhitektonski Projekt 2' },
  { id: '1049556946', title: 'Baum Studios Arhitektonski Projekt 3' },
  { id: '1050060609', title: 'Baum Studios Arhitektonski Projekt 4' }
];
---

<Layout>
  <LanguageSwitcher />
  <VideoBackground videos={videos} />

  <div class="content-overlay">
    <div class="scroll-indicator">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 6L15 12L9 18" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>

    <div class="tagline">
      <p class="tagline-text">{t.site.tagline}</p>
    </div>

    <div class="bottom-content">
      <div class="brand">
        <h1 class="brand-title" data-video="1">{t.site.brandTitle}</h1>
        <p class="brand-text" data-video="2">{t.site.brandText}</p>
      </div>

      <div class="contact">
        <a href={`mailto:${t.site.contactEmail}`} class="contact-email">{t.site.contactEmail}</a>
        <a href="tel:+385989027051" class="contact-phone">{t.site.contactPhone}</a>
      </div>
    </div>
  </div>

  <script>
    const scrollContainer = document.querySelector('.video-scroll-container');
    const brandTitle = document.querySelector('.brand-title');
    const brandText = document.querySelector('.brand-text');

    // Enable horizontal scrolling with mouse wheel
    scrollContainer.addEventListener('wheel', (e) => {
        e.preventDefault();
        scrollContainer.scrollLeft += e.deltaY;
    });

    // Handle text switching based on scroll position
    scrollContainer.addEventListener('scroll', () => {
        const scrollPosition = scrollContainer.scrollLeft;
        const containerWidth = scrollContainer.clientWidth;
        
        // If we're more than halfway through the first video
        if (scrollPosition > containerWidth / 2) {
            brandTitle.style.display = 'none';
            brandText.style.display = 'block';
        } else {
            brandTitle.style.display = 'block';
            brandText.style.display = 'none';
        }
    });
  </script>
</Layout>
